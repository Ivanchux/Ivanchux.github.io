<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CODE_CRT â€” Editor Retro | RETROTERM.AI</title>
  <link rel="stylesheet" href="estilos.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>

<section class="pantalla activa">

  <header class="cabecera">
    <h1>MODO DESARROLLO <span class="cursor-blink">|</span></h1>
    <p class="subtitulo">CODE_CRT â€” Editor retro integrado</p>
  </header>

  <div class="editor-marco">
    <div class="editor-barra">CODE_CRT v0.1 â€” Retro Integrated</div>

    <div class="editor-contenedor">
      <textarea id="html-editor" class="editor-crt" spellcheck="false">

<!-- HTML -->
<h1>Hola RetroTerm</h1>
<p>Escribe HTML, CSS y JS a la vez</p>
      </textarea>

      <textarea id="css-editor" class="editor-crt" spellcheck="false">
/* CSS */
body { background: #000; color: #00ff66; font-family: 'Courier New', monospace; }
h1 { text-shadow: 0 0 6px #00ff66; }
      </textarea>

      <textarea id="js-editor" class="editor-crt" spellcheck="false">
// JS
console.log("RetroCRT funcionando!");
      </textarea>
    </div>

    <div class="editor-botones">
      <button id="ejecutar">â–¶ Ejecutar</button>
      <button id="limpiar">ðŸ§¹ Limpiar Preview</button>
      <button id="guardar">ðŸ’¾ Guardar</button>
      <button id="cargar">ðŸ“‚ Cargar</button>
    </div>

    <iframe id="preview"></iframe>

  </div>

  <a href="index.html#inicio" class="volver">â¬… Volver al HUB</a>

</section>

<script>
  const htmlEditor = document.getElementById('html-editor');
  const cssEditor = document.getElementById('css-editor');
  const jsEditor = document.getElementById('js-editor');
  const preview = document.getElementById('preview');

  function actualizarPreview() {
    const html = htmlEditor.value;
    const css = "<style>" + cssEditor.value + "</style>";
    const js = "<script>" + jsEditor.value + "<\/script>";
    preview.srcdoc = html + css + js;
  }

  // Ejecutar manualmente
  document.getElementById('ejecutar').addEventListener('click', actualizarPreview);

  // Limpiar preview
  document.getElementById('limpiar').addEventListener('click', () => {
    preview.srcdoc = "";
  });

  // Guardar en localStorage
  document.getElementById('guardar').addEventListener('click', () => {
    localStorage.setItem('htmlCRT', htmlEditor.value);
    localStorage.setItem('cssCRT', cssEditor.value);
    localStorage.setItem('jsCRT', jsEditor.value);
    alert('CÃ³digo guardado en el navegador.');
  });

  // Cargar desde localStorage
  document.getElementById('cargar').addEventListener('click', () => {
    const h = localStorage.getItem('htmlCRT');
    const c = localStorage.getItem('cssCRT');
    const j = localStorage.getItem('jsCRT');
    if(h) htmlEditor.value = h;
    if(c) cssEditor.value = c;
    if(j) jsEditor.value = j;
    actualizarPreview();
  });

  // Vista previa en tiempo real
  [htmlEditor, cssEditor, jsEditor].forEach(editor => {
    editor.addEventListener('input', actualizarPreview);
  });

  // Cargar automÃ¡ticamente al iniciar
  window.addEventListener('load', () => {
    const h = localStorage.getItem('htmlCRT');
    const c = localStorage.getItem('cssCRT');
    const j = localStorage.getItem('jsCRT');
    if(h) htmlEditor.value = h;
    if(c) cssEditor.value = c;
    if(j) jsEditor.value = j;
    actualizarPreview();
  });
</script>

</body>
</html>
